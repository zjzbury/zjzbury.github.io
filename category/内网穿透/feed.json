{
    "version": "https://jsonfeed.org/version/1",
    "title": "JAVA • All posts by \"内网穿透\" category",
    "description": "爱编程，爱生活",
    "home_page_url": "http://www.startanew.cn",
    "items": [
        {
            "id": "http://www.startanew.cn/2021/04/17/tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91-%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85/",
            "url": "http://www.startanew.cn/2021/04/17/tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91-%E5%85%B6%E4%BB%96%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85/",
            "title": "安装tinc组建以太网",
            "date_published": "2021-04-17T06:11:09.000Z",
            "content_html": "<h3 id=\"主机安装\"><a class=\"markdownIt-Anchor\" href=\"#主机安装\">#</a> 主机安装</h3>\n<blockquote>\n<p>更新镜像</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update &amp;&amp; sudo apt-get upgrade -y &amp;&amp; sudo apt-get dist-upgrade -y &amp;&amp; sudo apt-get autoremove -y</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>安装 tinc</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install tinc -y</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>查看 tinc 安装目录   tinc 的默认主配置目录为 /etc/tinc</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">which tincd</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建配置文件</p>\n</blockquote>\n<ul>\n<li>建立网络配置目录</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;hosts</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>建立配置文件 tinc.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc.conf</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc.conf 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Name &#x3D; desktop（唯一的，不能相同）</span><br><span class=\"line\">ConnectTo &#x3D; tinc_ali</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>建立启动和关闭脚本 创建启动脚本 tinc-up</p>\n</blockquote>\n<ul>\n<li>创建启动脚本 tinc-up</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-up 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ifconfig $INTERFACE 10.0.0.102 netmask 255.255.0.0  &#x2F;&#x2F; (10.0.0.102以太网ip地址, 唯一的)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建关闭脚本 tinc-down</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-up 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ifconfig $INTERFACE down</span><br></pre></td></tr></table></figure>\n<ul>\n<li>赋予脚本可执行权限</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br><span class=\"line\">sudo chmod +x &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-down</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建本主机描述文件（网络名称为 desktop）</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;hosts&#x2F;desktop(与Name 相同)</span><br></pre></td></tr></table></figure>\n<p>编辑 desktop 内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Subnet &#x3D; 10.0.0.102&#x2F;32  &#x2F;&#x2F;（10.0.0.102以太网ip地址, 唯一的)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>生成密钥</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo tincd -n home_vpn -K</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>与其他主机交换密钥</p>\n</blockquote>\n<ul>\n<li>\n<p>将本主机的 /etc/tinc/home_vpn/hosts/desktop 复制到核心主机的同样位置。</p>\n</li>\n<li>\n<p>复制核心主机的 /etc/tinc/home_vpn/hosts/tinc_ali 到本主机的同样位置。</p>\n</li>\n</ul>\n<blockquote>\n<p>设为自启</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl enable tinc@home_vpn</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "tinc"
            ]
        },
        {
            "id": "http://www.startanew.cn/2021/04/17/tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91-win10%E5%AE%89%E8%A3%85/",
            "url": "http://www.startanew.cn/2021/04/17/tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91-win10%E5%AE%89%E8%A3%85/",
            "title": "安装tinc组建以太网",
            "date_published": "2021-04-17T06:11:09.000Z",
            "content_html": "<h3 id=\"win10安装\"><a class=\"markdownIt-Anchor\" href=\"#win10安装\">#</a> win10 安装</h3>\n<blockquote>\n<p>安装 tinc 下载  安装</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;www.tinc-vpn.org&#x2F;download&#x2F;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>在 Windows PowerShell（管理员）执行命令  安装虚拟网卡设备</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&amp; &#39;C:\\Program Files (x86)\\tinc\\tap-win64\\addtap.bat&#39;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建配置文件</p>\n</blockquote>\n<ul>\n<li>建立网络配置目录  管理员：Windows PowerShell 窗口中执行以下命令</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\hosts&#39;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>建立配置文件 tinc.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">notepad &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\tinc.conf&#39;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc.conf 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Name &#x3D; notebook</span><br><span class=\"line\">ConnectTo tinc_ali</span><br><span class=\"line\">Interface &#x3D; 以太网 2    &#x2F;&#x2F;刚刚创建的虚拟网卡</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>建立启动和关闭脚本 创建启动脚本 tinc-up</p>\n</blockquote>\n<ul>\n<li>创建启动脚本 tinc-up.bat</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;&#39; &gt; &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\tinc-up.bat&#39;</span><br><span class=\"line\">notepad &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\tinc-up.bat&#39;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-up 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netsh interface ip set address tinciface static 10.0.0.101 255.255.255.0   &#x2F;&#x2F;tinciface 虚拟网卡</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建关闭脚本 tinc-down.bat</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;&#39; &gt; &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\tinc-down.bat&#39;</span><br><span class=\"line\">notepad &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\tinc-down.bat&#39;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-down 内空</li>\n</ul>\n<blockquote>\n<p>创建本主机描述文件（网络名称为 notebook）</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;&#39; &gt; &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\hosts\\notebook&#39;</span><br><span class=\"line\">notepad &#39;C:\\Program Files (x86)\\tinc\\home_vpn\\hosts\\notebook&#39;</span><br></pre></td></tr></table></figure>\n<p>编辑 notebook 内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Subnet &#x3D; 10.0.0.101&#x2F;32  &#x2F;&#x2F;（10.0.0.101以太网ip地址, 唯一的)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>生成密钥</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&amp; &#39;C:\\Program Files (x86)\\tinc\\tincd.exe&#39; -n home_vpn -K</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>与其他主机交换密钥</p>\n</blockquote>\n<ul>\n<li>\n<p>将本主机的 /etc/tinc/home_vpn/hosts/desktop 复制到核心主机的同样位置。</p>\n</li>\n<li>\n<p>复制核心主机的 /etc/tinc/home_vpn/hosts/tinc_ali 到本主机的同样位置。</p>\n</li>\n</ul>\n<blockquote>\n<p>测试连接服务器   需要管理员运行</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tincd --net&#x3D;home_vpn -D -d 5</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>设为自启</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tincd --net&#x3D;home_vpn</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "tinc"
            ]
        },
        {
            "id": "http://www.startanew.cn/2021/04/17/%E5%AE%89%E8%A3%85tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91/",
            "url": "http://www.startanew.cn/2021/04/17/%E5%AE%89%E8%A3%85tinc%E7%BB%84%E5%BB%BA%E4%BB%A5%E5%A4%AA%E7%BD%91/",
            "title": "安装tinc组建以太网",
            "date_published": "2021-04-17T05:00:35.000Z",
            "content_html": "<h3 id=\"核心主机安装\"><a class=\"markdownIt-Anchor\" href=\"#核心主机安装\">#</a> 核心主机安装</h3>\n<blockquote>\n<p>更新镜像</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update &amp;&amp; sudo apt-get upgrade -y &amp;&amp; sudo apt-get dist-upgrade -y &amp;&amp; sudo apt-get autoremove -y</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>安装 tinc</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install tinc -y</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>查看 tinc 安装目录   tinc 的默认主配置目录为 /etc/tinc</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">which tincd</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建配置文件</p>\n</blockquote>\n<ul>\n<li>建立网络配置目录</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;hosts</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>建立配置文件 tinc.conf</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc.conf</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc.conf 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Name &#x3D; tinc_ali</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>建立启动和关闭脚本 创建启动脚本 tinc-up</p>\n</blockquote>\n<ul>\n<li>创建启动脚本 tinc-up</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-up 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ifconfig $INTERFACE 10.0.0.254 netmask 255.255.0.0</span><br></pre></td></tr></table></figure>\n<ul>\n<li>创建关闭脚本 tinc-down</li>\n</ul>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br></pre></td></tr></table></figure>\n<ul>\n<li>编辑 tinc-up 内容如下</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;sh</span><br><span class=\"line\">ifconfig $INTERFACE down</span><br></pre></td></tr></table></figure>\n<ul>\n<li>赋予脚本可执行权限</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-up</span><br><span class=\"line\">sudo chmod +x &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;tinc-down</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建本主机描述文件（网络名称为 tinc_ali）</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vi &#x2F;etc&#x2F;tinc&#x2F;home_vpn&#x2F;hosts&#x2F;tinc_ali</span><br></pre></td></tr></table></figure>\n<p>编辑 tinc_ali 内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Address &#x3D; 公网ip</span><br><span class=\"line\">Subnet &#x3D; 10.0.0.254&#x2F;32</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>生成密钥</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo tincd -n home_vpn -K</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>与其他主机交换密钥</p>\n</blockquote>\n",
            "tags": [
                "tinc"
            ]
        }
    ]
}