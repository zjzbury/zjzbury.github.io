{
    "version": "https://jsonfeed.org/version/1",
    "title": "JAVA • All posts by \"android\" tag",
    "description": "爱编程，爱生活",
    "home_page_url": "http://www.startanew.cn",
    "items": [
        {
            "id": "http://www.startanew.cn/2020/07/14/%E5%AE%89%E5%8D%93%E6%88%AA%E5%B1%8F%E5%8A%9F%E8%83%BD%E4%B8%8E%E5%8A%A0%E8%BD%BDsd%E5%8D%A1%E7%9A%84html/",
            "url": "http://www.startanew.cn/2020/07/14/%E5%AE%89%E5%8D%93%E6%88%AA%E5%B1%8F%E5%8A%9F%E8%83%BD%E4%B8%8E%E5%8A%A0%E8%BD%BDsd%E5%8D%A1%E7%9A%84html/",
            "title": "安卓截屏功能与加载sd卡的html",
            "date_published": "2020-07-14T00:53:56.000Z",
            "content_html": "<ul>\n<li>代码如下:</li>\n</ul>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.medua.loadhtml;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.Manifest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.annotation.SuppressLint;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.app.Activity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Intent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.pm.PackageManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.res.Resources;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.PixelFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.hardware.display.DisplayManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.hardware.display.VirtualDisplay;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.media.Image;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.media.ImageReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.media.projection.MediaProjection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.media.projection.MediaProjectionManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Build;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.View;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.webkit.WebSettings;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.webkit.WebView;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.widget.Button;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.widget.Toast;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.annotation.NonNull;</span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.core.app.ActivityCompat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.core.content.ContextCompat;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.SimpleDateFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Locale;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PERMISSION_REQ_ID = <span class=\"number\">22</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String[] REQUESTED_PERMISSIONS = &#123;</span><br><span class=\"line\">            Manifest.permission.READ_EXTERNAL_STORAGE,</span><br><span class=\"line\">            Manifest.permission.WRITE_EXTERNAL_STORAGE</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> WebView webView;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Button butImg;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_main);</span><br><span class=\"line\">        initView();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (checkSelfPermission(REQUESTED_PERMISSIONS[<span class=\"number\">0</span>], PERMISSION_REQ_ID) &amp;&amp;</span><br><span class=\"line\">                checkSelfPermission(REQUESTED_PERMISSIONS[<span class=\"number\">1</span>], PERMISSION_REQ_ID)) &#123;</span><br><span class=\"line\">            setHtml();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//申请sd卡读写权限</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">checkSelfPermission</span><span class=\"params\">(String permission, <span class=\"keyword\">int</span> requestCode)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ContextCompat.checkSelfPermission(<span class=\"keyword\">this</span>, permission) !=</span><br><span class=\"line\">                PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class=\"line\">            ActivityCompat.requestPermissions(<span class=\"keyword\">this</span>, REQUESTED_PERMISSIONS, requestCode);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRequestPermissionsResult</span><span class=\"params\">(<span class=\"keyword\">int</span> requestCode,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                                           <span class=\"meta\">@NonNull</span> String[] permissions, <span class=\"meta\">@NonNull</span> <span class=\"keyword\">int</span>[] grantResults)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (requestCode == PERMISSION_REQ_ID) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (grantResults[<span class=\"number\">0</span>] != PackageManager.PERMISSION_GRANTED ||</span><br><span class=\"line\">                    grantResults[<span class=\"number\">1</span>] != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class=\"line\">                Toast.makeText(MainActivity.<span class=\"keyword\">this</span>, <span class=\"string\">&quot;暂无权限！！！&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                setHtml();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//加载sd卡里的html文件</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initView</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        webView = (WebView) findViewById(R.id.webView);</span><br><span class=\"line\">        WebSettings ws = webView.getSettings();</span><br><span class=\"line\">        ws.setJavaScriptEnabled(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        butImg = (Button) findViewById(R.id.butImg);</span><br><span class=\"line\">        butImg.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setHtml</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        webView.loadUrl(<span class=\"string\">&quot;file://&quot;</span> + <span class=\"string\">&quot;/storage/emulated/0/loadHtml/index.html&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressLint(&quot;WrongConstant&quot;)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (v.getId()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> R.id.butImg:</span><br><span class=\"line\">                createImage(v);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//截屏功能实现</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createImage</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">        SimpleDateFormat sdf = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">&quot;yyyy-MM-dd_HH-mm-ss&quot;</span>, Locale.US);</span><br><span class=\"line\">        String fname = <span class=\"string\">&quot;/sdcard/&quot;</span> + sdf.format(<span class=\"keyword\">new</span> Date()) + <span class=\"string\">&quot;.png&quot;</span>;</span><br><span class=\"line\">        View view = v.getRootView();</span><br><span class=\"line\">        view.setDrawingCacheEnabled(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        view.buildDrawingCache();</span><br><span class=\"line\">        Bitmap bitmap = view.getDrawingCache();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;bitmap got!&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                FileOutputStream out = <span class=\"keyword\">new</span> FileOutputStream(fname);</span><br><span class=\"line\">                bitmap.compress(Bitmap.CompressFormat.PNG, <span class=\"number\">100</span>, out);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "android"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/13/kotlin%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%BA%8C%EF%BC%89/",
            "url": "http://www.startanew.cn/2020/07/13/kotlin%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%BA%8C%EF%BC%89/",
            "title": "kotlin基础知识（二）",
            "date_published": "2020-07-13T07:08:00.000Z",
            "content_html": "<h5 id=\"kotlin类与对象\"><a class=\"markdownIt-Anchor\" href=\"#kotlin类与对象\">#</a> kotlin 类与对象</h5>\n<ul>\n<li>类的声明:</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bury</span></span>&#123; <span class=\"comment\">// 类名为 Bury// 大括号内是类体构成 &#125;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a> \n<ul>\n<li>类的成员函数:</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bury</span>() </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">fun <span class=\"title\">myPrint</span><span class=\"params\">()</span> </span>&#123; print(<span class=\"string\">&quot;Hello world&quot;</span>) &#125; <span class=\"comment\">// 成员函数</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>类的成员属性:</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">val site = Runoob() <span class=\"comment\">// Kotlin 中没有 new 关键字</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Koltin 中的类可以有一个 主构造器，以及一个或多个次构造器，主构造器是类头部的一部分，位于类名称之后:</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Person constructor(firstName: String) &#123;&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如果主构造器没有任何注解，也没有任何可见度修饰符，那么 constructor 关键字可以省略。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Person(firstName: String) &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>getter 和 setter 都是可选如果属性类型可以从初始化语句或者类的成员函数中推断出来，那就可以省去类型，val 不允许设置 setter 函数，因为它是只读的。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> allByDefault: Int? <span class=\"comment\">// 错误: 需要一个初始化语句, 默认实现了 getter 和 setter 方法</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> initialized = <span class=\"number\">1</span>    <span class=\"comment\">// 类型为 Int, 默认实现了 getter 和 setter</span></span><br><span class=\"line\">val simple: Int?       <span class=\"comment\">// 类型为 Int ，默认实现 getter ，但必须在构造函数中初始化</span></span><br><span class=\"line\">val inferredType = <span class=\"number\">1</span>   <span class=\"comment\">// 类型为 Int 类型,默认实现 getter</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>getter 和 setter 属性声明的完整语法：</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> &lt;propertyName&gt;[: &lt;PropertyType&gt;] [= &lt;property_initializer&gt;]</span><br><span class=\"line\">    [&lt;getter&gt;]</span><br><span class=\"line\">    [&lt;setter&gt;]</span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>示例:</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> lastName: String = <span class=\"string\">&quot;zhang&quot;</span></span><br><span class=\"line\">        get() = field.toUpperCase()   <span class=\"comment\">// 将变量赋值后转换为大写</span></span><br><span class=\"line\">        set</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> no: Int = <span class=\"number\">100</span></span><br><span class=\"line\">        get() = field                <span class=\"comment\">// 后端变量</span></span><br><span class=\"line\">        set(value) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value &lt; <span class=\"number\">10</span>) &#123;       <span class=\"comment\">// 如果传入的值小于 10 返回该值</span></span><br><span class=\"line\">                field = value</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                field = -<span class=\"number\">1</span>         <span class=\"comment\">// 如果传入的值大于等于 10 返回 -1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> heiht: Float = <span class=\"number\">145.4f</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> set</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 测试</span></span><br><span class=\"line\"><span class=\"function\">fun <span class=\"title\">main</span><span class=\"params\">(args: Array&lt;String&gt;)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> person: Person = Person()</span><br><span class=\"line\">    person.lastName = <span class=\"string\">&quot;wang&quot;</span></span><br><span class=\"line\">    println(<span class=\"string\">&quot;lastName:$&#123;person.lastName&#125;&quot;</span>)</span><br><span class=\"line\">    person.no = <span class=\"number\">9</span></span><br><span class=\"line\">    println(<span class=\"string\">&quot;no:$&#123;person.no&#125;&quot;</span>)</span><br><span class=\"line\">    person.no = <span class=\"number\">20</span></span><br><span class=\"line\">    println(<span class=\"string\">&quot;no:$&#123;person.no&#125;&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>",
            "tags": [
                "android"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/13/kotlin%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/",
            "url": "http://www.startanew.cn/2020/07/13/kotlin%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/",
            "title": "kotlin基础知识（一）",
            "date_published": "2020-07-13T07:01:00.000Z",
            "content_html": "<h5 id=\"kotlin-基础语法\"><a class=\"markdownIt-Anchor\" href=\"#kotlin-基础语法\">#</a> Kotlin 基础语法</h5>\n<blockquote>\n<p>方法的定义</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun sum(a: Int, b: Int): Int &#123;   &#x2F;&#x2F; Int 参数，返回值 Int</span><br><span class=\"line\">    return a + b</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun printSum(a: Int, b: Int): Unit &#123; &#x2F;&#x2F;无参数</span><br><span class=\"line\">    print(a + b)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a> \n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public fun printSum(a: Int, b: Int) &#123; &#x2F;&#x2F;无参数</span><br><span class=\"line\">    print(a + b)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>匿名函数</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class=\"line\">    val sumLambda: (Int, Int) -&gt; Int &#x3D; &#123;x,y -&gt; x+y&#125;</span><br><span class=\"line\">    println(sumLambda(1,2))  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>定义常量与变量<br>\n可变变量定义：var 关键字</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var &lt;标识符&gt; : &lt;类型&gt; &#x3D; &lt;初始化值&gt;  </span><br></pre></td></tr></table></figure>\n<p>不可变变量定义：val 关键字，只能赋值一次的变量 (类似 Java 中 final 修饰的变量)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">val &lt;标识符&gt; : &lt;类型&gt; &#x3D; &lt;初始化值&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>区间</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for (i in 1..4) print(i) &#x2F;&#x2F; 输出“1234”</span><br><span class=\"line\"></span><br><span class=\"line\">for (i in 4..1) print(i) &#x2F;&#x2F; 什么都不输出</span><br><span class=\"line\"></span><br><span class=\"line\">if (i in 1..10) &#123; &#x2F;&#x2F; 等同于 1 &lt;&#x3D; i &amp;&amp; i &lt;&#x3D; 10</span><br><span class=\"line\">    println(i)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; 使用 step 指定步长</span><br><span class=\"line\">for (i in 1..4 step 2) print(i) &#x2F;&#x2F; 输出“13”</span><br><span class=\"line\"></span><br><span class=\"line\">for (i in 4 downTo 1 step 2) print(i) &#x2F;&#x2F; 输出“42”</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; 使用 until 函数排除结束元素</span><br><span class=\"line\">for (i in 1 until 10) &#123;   &#x2F;&#x2F; i in [1, 10) 排除了 10</span><br><span class=\"line\">     println(i)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h5 id=\"基本数据类型\"><a class=\"markdownIt-Anchor\" href=\"#基本数据类型\">#</a> 基本数据类型</h5>\n<ul>\n<li>语法</li>\n</ul>\n<p>when 类似其他语言的 switch 操作符。其最简单的形式如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">when (x) &#123;</span><br><span class=\"line\">    1 -&gt; print(&quot;x &#x3D;&#x3D; 1&quot;)</span><br><span class=\"line\">    2 -&gt; print(&quot;x &#x3D;&#x3D; 2&quot;)</span><br><span class=\"line\">    else -&gt; &#123; &#x2F;&#x2F; 注意这个块</span><br><span class=\"line\">        print(&quot;x 不是 1 ，也不是 2&quot;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>一个 if 语句包含一个布尔表达式和一条或多条语句。</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 传统用法</span><br><span class=\"line\">var max &#x3D; a </span><br><span class=\"line\">if (a &lt; b) max &#x3D; b</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; 使用 else </span><br><span class=\"line\">var max: Int</span><br><span class=\"line\">if (a &gt; b) &#123;</span><br><span class=\"line\">    max &#x3D; a</span><br><span class=\"line\">&#125; else &#123;</span><br><span class=\"line\">    max &#x3D; b</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#x2F;&#x2F; 作为表达式</span><br><span class=\"line\">val max &#x3D; if (a &gt; b) a else b</span><br></pre></td></tr></table></figure>",
            "tags": [
                "android"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/13/%E5%AE%89%E5%8D%93%E7%89%88%E8%90%BD%E5%8F%B6%E7%89%B9%E6%95%88-canvas%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89/",
            "url": "http://www.startanew.cn/2020/07/13/%E5%AE%89%E5%8D%93%E7%89%88%E8%90%BD%E5%8F%B6%E7%89%B9%E6%95%88-canvas%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89/",
            "title": "安卓版落叶特效-canvas篇（一）",
            "date_published": "2020-07-13T06:56:00.000Z",
            "content_html": "<h5 id=\"自定义view代码如下\"><a class=\"markdownIt-Anchor\" href=\"#自定义view代码如下\">#</a> 自定义 View，代码如下:</h5>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> net.cloudelevator.anim;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.BitmapFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.Color;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.graphics.Paint;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Handler;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Message;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.View;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.annotation.NonNull;</span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.annotation.Nullable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCanvas</span> <span class=\"keyword\">extends</span> <span class=\"title\">View</span> </span>&#123;</span><br><span class=\"line\">    Paint paint;</span><br><span class=\"line\">    Paint tpaint;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] list = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">192</span>];</span><br><span class=\"line\">    Handler handler = <span class=\"keyword\">new</span> Handler() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Message msg)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (msg.what) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                    postInvalidate();</span><br><span class=\"line\">                    handler.sendEmptyMessageDelayed(<span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyCanvas</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">192</span>; i++) &#123;</span><br><span class=\"line\">            list[i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">100</span>; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; list.length; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (list[i] &gt; <span class=\"number\">758</span> + Math.random() * <span class=\"number\">1e4</span>) &#123;</span><br><span class=\"line\">                    list[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    list[i] = list[i] + <span class=\"number\">10</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        handler.sendEmptyMessageDelayed(<span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyCanvas</span><span class=\"params\">(Context context, <span class=\"meta\">@Nullable</span> AttributeSet attrs)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">192</span>; i++) &#123;</span><br><span class=\"line\">            list[i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">100</span>; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; list.length; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (list[i] &gt; <span class=\"number\">758</span> + Math.random() * <span class=\"number\">1e4</span>) &#123;</span><br><span class=\"line\">                    list[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    list[i] = list[i] + <span class=\"number\">10</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        handler.sendEmptyMessageDelayed(<span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyCanvas</span><span class=\"params\">(Context context, <span class=\"meta\">@Nullable</span> AttributeSet attrs, <span class=\"keyword\">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyleAttr);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">192</span>; i++) &#123;</span><br><span class=\"line\">            list[i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">100</span>; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; list.length; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (list[i] &gt; <span class=\"number\">758</span> + Math.random() * <span class=\"number\">1e4</span>) &#123;</span><br><span class=\"line\">                    list[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    list[i] = list[i] + <span class=\"number\">10</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        handler.sendEmptyMessageDelayed(<span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDraw</span><span class=\"params\">(Canvas canvas)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDraw(canvas);</span><br><span class=\"line\">        paint = <span class=\"keyword\">new</span> Paint();</span><br><span class=\"line\">        tpaint = <span class=\"keyword\">new</span> Paint();</span><br><span class=\"line\">        tpaint.setColor(Color.WHITE);</span><br><span class=\"line\">        paint.setStrokeWidth(<span class=\"number\">0</span>);</span><br><span class=\"line\">        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.bg);</span><br><span class=\"line\">        canvas.drawBitmap(bitmap, <span class=\"number\">0</span>, <span class=\"number\">0</span>, paint);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; list.length; i++) &#123;</span><br><span class=\"line\">            canvas.drawText(<span class=\"string\">&quot;\\uD83C\\uDF42&quot;</span>, i * <span class=\"number\">50</span>, list[i], tpaint);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (list[i] &gt; <span class=\"number\">758</span> + Math.random() * <span class=\"number\">1e4</span>) &#123;</span><br><span class=\"line\">                list[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                list[i] = list[i] + <span class=\"number\">10</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>",
            "tags": [
                "android"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/13/%E5%AE%89%E5%8D%93%E6%9C%8D%E5%8A%A1%E9%87%8C%E7%9B%91%E5%90%AC%E6%8C%89%E9%92%AE/",
            "url": "http://www.startanew.cn/2020/07/13/%E5%AE%89%E5%8D%93%E6%9C%8D%E5%8A%A1%E9%87%8C%E7%9B%91%E5%90%AC%E6%8C%89%E9%92%AE/",
            "title": "安卓服务里监听按钮",
            "date_published": "2020-07-13T06:45:00.000Z",
            "content_html": "<h5 id=\"一使用accessibilityservice实现按钮监听在资源文件夹新建xml资源文件夹然后新accessibility_service_configxml\"><a class=\"markdownIt-Anchor\" href=\"#一使用accessibilityservice实现按钮监听在资源文件夹新建xml资源文件夹然后新accessibility_service_configxml\">#</a> 一。使用 AccessibilityService 实现按钮监听，在资源文件夹新建 xml 资源文件夹，然后新 accessibility_service_config.xml。</h5>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class=\"line\">&lt;accessibility-service xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class=\"line\">    android:accessibilityEventTypes&#x3D;&quot;typeAllMask&quot;</span><br><span class=\"line\">    android:accessibilityFeedbackType&#x3D;&quot;feedbackGeneric&quot;</span><br><span class=\"line\">    android:accessibilityFlags&#x3D;&quot;flagRequestFilterKeyEvents&quot;</span><br><span class=\"line\">    android:canRetrieveWindowContent&#x3D;&quot;true&quot;</span><br><span class=\"line\">    android:canRequestFilterKeyEvents&#x3D;&quot;true&quot;</span><br><span class=\"line\">    android:description&#x3D;&quot;@string&#x2F;accessibility_service_description&quot;</span><br><span class=\"line\">    &#x2F;&gt;</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h5 id=\"二在配置文件中配置\"><a class=\"markdownIt-Anchor\" href=\"#二在配置文件中配置\">#</a> 二。在配置文件中配置</h5>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;service</span><br><span class=\"line\">android:name&#x3D;&quot;.service.MyAccessibilityService&quot;</span><br><span class=\"line\">android:label&#x3D;&quot;按钮监听&quot;</span><br><span class=\"line\">android:enabled&#x3D;&quot;true&quot;</span><br><span class=\"line\">android:exported&#x3D;&quot;true&quot;</span><br><span class=\"line\">android:permission&#x3D;&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&lt;intent-filter&gt;</span><br><span class=\"line\">&lt;action android:name&#x3D;&quot;android.accessibilityservice.AccessibilityService&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;intent-filter&gt;</span><br><span class=\"line\">&lt;meta-data</span><br><span class=\"line\">android:name&#x3D;&quot;android.accessibilityservice&quot;</span><br><span class=\"line\">android:resource&#x3D;&quot;@xml&#x2F;accessibility_service_config&quot;</span><br><span class=\"line\">&#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;service&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h5 id=\"三创建myaccessibilityservice类继承accessibilityservice类-重写onkeyevent方法\"><a class=\"markdownIt-Anchor\" href=\"#三创建myaccessibilityservice类继承accessibilityservice类-重写onkeyevent方法\">#</a> 三。创建 MyAccessibilityService 类，继承 AccessibilityService 类  重写 onKeyEvent 方法</h5>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MyAccessibilityService extends AccessibilityService &#123;</span><br><span class=\"line\">    private static final String TAG &#x3D; &quot;测试&quot;;</span><br><span class=\"line\">    long aLong &#x3D; 0, bLong &#x3D; 0;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected void onServiceConnected() &#123;</span><br><span class=\"line\">        super.onServiceConnected();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void onAccessibilityEvent(AccessibilityEvent event) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected boolean onKeyEvent(KeyEvent event) &#123;</span><br><span class=\"line\">        if (event.getKeyCode()&#x3D;&#x3D;93)&#123;</span><br><span class=\"line\">            bLong &#x3D; System.currentTimeMillis();</span><br><span class=\"line\">            if (event.getKeyCode() &#x3D;&#x3D; 93) &#123;</span><br><span class=\"line\">                if (aLong &#x3D;&#x3D; 0) &#123;</span><br><span class=\"line\">                    aLong &#x3D; System.currentTimeMillis();</span><br><span class=\"line\">                &#125; else &#123;</span><br><span class=\"line\">                    if (bLong - aLong &lt; 2000) &#123;</span><br><span class=\"line\">                        Map&lt;String, String&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class=\"line\">                        map.put(&quot;class&quot;, &quot;AdPresentation.class&quot;);</span><br><span class=\"line\">                        EventBus.getDefault().post(map);</span><br><span class=\"line\">                    &#125; else &#123;</span><br><span class=\"line\">                        aLong &#x3D; System.currentTimeMillis();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void onInterrupt() &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void onDestroy() &#123;</span><br><span class=\"line\">        super.onDestroy();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "android"
            ]
        }
    ]
}